<?xml version="1.0" encoding="utf-8" ?>

<!DOCTYPE sqlMap      
	PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
	"http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap>

<typeAlias alias="VoiceFile" type="com.bps.dal.object.dianying.VoiceFile" />
<typeAlias alias="DianYingUser" type="com.bps.dal.object.dianying.DianYingUser" />
    	<!--查询符合要求的录音文件信息的查询条件-->
	<sql id="getVoiceFileInfo_property">
		<isNotEmpty property="id" prepend="and">
		id=#id#
		</isNotEmpty>
		<isNotEmpty property="voice_file_id" prepend="and">
		voice_file_id=#voice_file_id#
		</isNotEmpty>
		<isNotEmpty property="voice_file_name" prepend="and">
		voice_file_name=#voice_file_name#
		</isNotEmpty>
		<isNotEmpty property="voice_file_path" prepend="and">
		voice_file_path=#voice_file_path#
		</isNotEmpty>
		<isNotEmpty property="upload_user_id" prepend="and">
		upload_user_id=#upload_user_id#
		</isNotEmpty>
		<isNotEmpty property="voice_type" prepend="and">
		voice_type=#voice_type#
		</isNotEmpty>
		<isNotEmpty property="voice_level" prepend="and">
		voice_level=#voice_level#
		</isNotEmpty>
		<isNotEmpty property="upload_time" prepend="and">
		upload_time>#upload_time#
		</isNotEmpty>
    </sql>
      	<!-- 根据条件查询符合要求的录音文件信息-->
	<select id="VoiceFileDaoImpl_getVoiceFileInfo" parameterClass="HashMap" resultClass="VoiceFile">
		select * from voice_file
		<dynamic prepend="WHERE">
			<include refid="getVoiceFileInfo_property" />
		</dynamic>
	</select>
	
		<!--查询 所有用户信息 -->
	<select id="VoiceFileDaoImpl_getUserList" resultClass="DianYingUser">
		select user_id,user_real_name,bm_id,dept_id,dept_name,bm_name,user_name,bm_path,user_role,user_role_id,user_sex from user_list where (user_status='正常' or user_status='冻结') and user_name!=''
	</select>
		<!--根据坐席ID获得坐席性别 -->
	<select id="VoiceFileDaoImpl_getUserSex" parameterClass="String" resultClass="String">
		select user_sex from user_list where (user_status='正常' or user_status='冻结') and user_name=#agentId#
	</select>
</sqlMap>
